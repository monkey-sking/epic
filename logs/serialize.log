{"text": "2023-09-15 07:21:02 | INFO - prelude- {'action': 'Checking the operating environment'}\n", "record": {"elapsed": {"repr": "0:00:00.331095", "seconds": 0.331095}, "exception": null, "extra": {"action": "Checking the operating environment"}, "file": {"name": "claim.py", "path": "/home/runner/work/epic/epic/epic/src/claim.py"}, "function": "prelude", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 25, "message": "prelude", "module": "claim", "name": "__main__", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:02.862640+08:00", "timestamp": 1694733662.86264}}}
{"text": "2023-09-15 07:21:03 | DEBUG - Downloading resource- {'url': 'https://raw.githubusercontent.com/QIN2DIM/hcaptcha-challenger/main/src/objects.yaml', 'to': '/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/objects.yaml'}\n", "record": {"elapsed": {"repr": "0:00:00.524684", "seconds": 0.524684}, "exception": null, "extra": {"url": "https://raw.githubusercontent.com/QIN2DIM/hcaptcha-challenger/main/src/objects.yaml", "to": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/objects.yaml"}, "file": {"name": "modelhub.py", "path": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/modelhub.py"}, "function": "request_resource", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 45, "message": "Downloading resource", "module": "modelhub", "name": "hcaptcha_challenger.onnx.modelhub", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:03.056229+08:00", "timestamp": 1694733663.056229}}}
{"text": "2023-09-15 07:21:03 | INFO - Reloading the local cache of Assets- {'assets_dir': '/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/_assets'}\n", "record": {"elapsed": {"repr": "0:00:00.641463", "seconds": 0.641463}, "exception": null, "extra": {"assets_dir": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/_assets"}, "file": {"name": "modelhub.py", "path": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/modelhub.py"}, "function": "flush_runtime_assets", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 136, "message": "Reloading the local cache of Assets", "module": "modelhub", "name": "hcaptcha_challenger.onnx.modelhub", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:03.173008+08:00", "timestamp": 1694733663.173008}}}
{"text": "2023-09-15 07:21:03 | DEBUG - Pulling Assets index file- {'url': 'https://api.github.com/repos/QIN2DIM/hcaptcha-challenger/releases'}\n", "record": {"elapsed": {"repr": "0:00:00.642049", "seconds": 0.642049}, "exception": null, "extra": {"url": "https://api.github.com/repos/QIN2DIM/hcaptcha-challenger/releases"}, "file": {"name": "modelhub.py", "path": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/modelhub.py"}, "function": "flush_runtime_assets", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 150, "message": "Pulling Assets index file", "module": "modelhub", "name": "hcaptcha_challenger.onnx.modelhub", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:03.173594+08:00", "timestamp": 1694733663.173594}}}
{"text": "2023-09-15 07:21:05 | INFO - execute task- {'name': 'claim_epic_games'}\n", "record": {"elapsed": {"repr": "0:00:02.593617", "seconds": 2.593617}, "exception": null, "extra": {"name": "claim_epic_games"}, "file": {"name": "models.py", "path": "/home/runner/work/epic/epic/epic/src/services/models.py"}, "function": "execute", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 105, "message": "execute task", "module": "models", "name": "services.models", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:05.125162+08:00", "timestamp": 1694733665.125162}}}
{"text": "2023-09-15 07:21:05 | INFO - claim_epic_games- {'action': 'Try to flush cookie'}\n", "record": {"elapsed": {"repr": "0:00:02.641065", "seconds": 2.641065}, "exception": null, "extra": {"action": "Try to flush cookie"}, "file": {"name": "claim.py", "path": "/home/runner/work/epic/epic/epic/src/claim.py"}, "function": "claim_epic_games", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 57, "message": "claim_epic_games", "module": "claim", "name": "__main__", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:05.172610+08:00", "timestamp": 1694733665.17261}}}
{"text": "2023-09-15 07:21:08 | INFO - login- {'url': 'https://www.epicgames.com/id/login?lang=en-US&noHostRedirect=true&redirectUrl=https://store.epicgames.com/en-US/free-games'}\n", "record": {"elapsed": {"repr": "0:00:06.429739", "seconds": 6.429739}, "exception": null, "extra": {"url": "https://www.epicgames.com/id/login?lang=en-US&noHostRedirect=true&redirectUrl=https://store.epicgames.com/en-US/free-games"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "_login", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 94, "message": "login", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:08.961284+08:00", "timestamp": 1694733668.961284}}}
{"text": "2023-09-15 07:21:09 | INFO - login-with-epic- {'url': 'https://www.epicgames.com/id/login/epic?lang=en-US&redirect_uri=https%3A%2F%2Fstore.epicgames.com%2Fen-US%2Ffree-games'}\n", "record": {"elapsed": {"repr": "0:00:07.048976", "seconds": 7.048976}, "exception": null, "extra": {"url": "https://www.epicgames.com/id/login/epic?lang=en-US&redirect_uri=https%3A%2F%2Fstore.epicgames.com%2Fen-US%2Ffree-games"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "_login", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 96, "message": "login-with-epic", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:09.580521+08:00", "timestamp": 1694733669.580521}}}
{"text": "2023-09-15 07:21:14 | DEBUG - claim_weekly_games- {'action': 'handle challenge'}\n", "record": {"elapsed": {"repr": "0:00:11.581236", "seconds": 11.581236}, "exception": null, "extra": {"action": "handle challenge"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "_login", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 108, "message": "claim_weekly_games", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:14.112781+08:00", "timestamp": 1694733674.112781}}}
{"text": "2023-09-15 07:21:14 | DEBUG - Downloading resource- {'url': 'https://github.com/QIN2DIM/hcaptcha-challenger/releases/download/model/electronic_device2311.onnx', 'to': '/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/electronic_device2311.onnx'}\n", "record": {"elapsed": {"repr": "0:00:11.793167", "seconds": 11.793167}, "exception": null, "extra": {"url": "https://github.com/QIN2DIM/hcaptcha-challenger/releases/download/model/electronic_device2311.onnx", "to": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/models/electronic_device2311.onnx"}, "file": {"name": "modelhub.py", "path": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/hcaptcha_challenger/onnx/modelhub.py"}, "function": "request_resource", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 45, "message": "Downloading resource", "module": "modelhub", "name": "hcaptcha_challenger.onnx.modelhub", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:14.324712+08:00", "timestamp": 1694733674.324712}}}
{"text": "2023-09-15 07:21:22 | DEBUG - handle challenge- {'result': 'success'}\n", "record": {"elapsed": {"repr": "0:00:19.595978", "seconds": 19.595978}, "exception": null, "extra": {"result": "success"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "_login", "level": {"icon": "üêû", "name": "DEBUG", "no": 10}, "line": 111, "message": "handle challenge", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:22.127523+08:00", "timestamp": 1694733682.127523}}}
{"text": "2023-09-15 07:21:27 | SUCCESS - login- {'result': 'token has not expired'}\n", "record": {"elapsed": {"repr": "0:00:24.501396", "seconds": 24.501396}, "exception": null, "extra": {"result": "token has not expired"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "_login", "level": {"icon": "‚úÖ", "name": "SUCCESS", "no": 25}, "line": 129, "message": "login", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:27.032941+08:00", "timestamp": 1694733687.032941}}}
{"text": "2023-09-15 07:21:34 | SUCCESS - flush_token- {'path': PosixPath('/home/runner/work/epic/epic/epic/user_data_dir/epic-games@epicgames/ctx_cookie.json')}\n", "record": {"elapsed": {"repr": "0:00:31.618969", "seconds": 31.618969}, "exception": null, "extra": {"path": "/home/runner/work/epic/epic/epic/user_data_dir/epic-games@epicgames/ctx_cookie.json"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "flush_token", "level": {"icon": "‚úÖ", "name": "SUCCESS", "no": 25}, "line": 150, "message": "flush_token", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:34.150514+08:00", "timestamp": 1694733694.150514}}}
{"text": "2023-09-15 07:21:35 | INFO - claim_weekly_games- {'action': 'go to store', 'url': 'https://store.epicgames.com/en-US/p/911-operator-585edd'}\n", "record": {"elapsed": {"repr": "0:00:32.766427", "seconds": 32.766427}, "exception": null, "extra": {"action": "go to store", "url": "https://store.epicgames.com/en-US/p/911-operator-585edd"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "claim_weekly_games", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 162, "message": "claim_weekly_games", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:35.297972+08:00", "timestamp": 1694733695.297972}}}
{"text": "2023-09-15 07:21:45 | INFO - claim_weekly_games- {'action': 'move to webPurchaseContainer iframe'}\n", "record": {"elapsed": {"repr": "0:00:42.745965", "seconds": 42.745965}, "exception": null, "extra": {"action": "move to webPurchaseContainer iframe"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "claim_weekly_games", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 190, "message": "claim_weekly_games", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:45.277510+08:00", "timestamp": 1694733705.27751}}}
{"text": "2023-09-15 07:21:47 | INFO - claim_weekly_games- {'action': 'click payment button'}\n", "record": {"elapsed": {"repr": "0:00:45.389462", "seconds": 45.389462}, "exception": null, "extra": {"action": "click payment button"}, "file": {"name": "epic_games.py", "path": "/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py"}, "function": "claim_weekly_games", "level": {"icon": "‚ÑπÔ∏è", "name": "INFO", "no": 20}, "line": 197, "message": "claim_weekly_games", "module": "epic_games", "name": "services.agents.epic_games", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:21:47.921007+08:00", "timestamp": 1694733707.921007}}}
{"text": "2023-09-15 07:22:27 | ERROR - An error has been caught in function '_run', process 'MainProcess' (3645), thread 'MainThread' (140312588893248):- {}\nTraceback (most recent call last):\n  File \"/home/runner/work/epic/epic/epic/src/services/models.py\", line 113, in execute\n    await container(context)\n  File \"/home/runner/work/epic/epic/epic/src/claim.py\", line 79, in claim_epic_games\n    await epic.claim_weekly_games(page, promotions)\n  File \"/home/runner/work/epic/epic/epic/src/services/agents/epic_games.py\", line 209, in claim_weekly_games\n    await page.wait_for_url(URL_CART_SUCCESS)\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/async_api/_generated.py\", line 9408, in wait_for_url\n    await self._impl_obj.wait_for_url(\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_page.py\", line 503, in wait_for_url\n    return await self._main_frame.wait_for_url(**locals_to_params(locals()))\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 232, in wait_for_url\n    async with self.expect_navigation(\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_event_context_manager.py\", line 33, in __aexit__\n    await self._future\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 214, in continuation\n    await self._wait_for_load_state_impl(state=wait_until, timeout=t)\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_frame.py\", line 270, in _wait_for_load_state_impl\n    await wait_helper.result()\nplaywright._impl._api_types.TimeoutError: Timeout 25860ms exceeded.\n\nDuring handling of the above exception, another exception occurred:\n\nTraceback (most recent call last):\n  File \"/home/runner/work/epic/epic/epic/src/claim.py\", line 94, in <module>\n    asyncio.run(run())\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/runners.py\", line 44, in run\n    return loop.run_until_complete(main)\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/base_events.py\", line 636, in run_until_complete\n    self.run_forever()\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/base_events.py\", line 603, in run_forever\n    self._run_once()\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/base_events.py\", line 1909, in _run_once\n    handle._run()\n> File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/events.py\", line 80, in _run\n    self._context.run(self._callback, *self._args)\n  File \"/home/runner/work/epic/epic/epic/src/claim.py\", line 90, in run\n    await agent.execute(sequence=[claim_epic_games], headless=True)\n  File \"/home/runner/work/epic/epic/epic/src/services/models.py\", line 89, in execute\n    async with async_playwright() as p:\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/async_api/_context_manager.py\", line 58, in __aexit__\n    await self._connection.stop_async()\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 284, in stop_async\n    self.cleanup(error_message)\n  File \"/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/site-packages/playwright/_impl/_connection.py\", line 295, in cleanup\n    callback.future.set_exception(Error(error_message))\nasyncio.exceptions.InvalidStateError: invalid state\n", "record": {"elapsed": {"repr": "0:01:25.106534", "seconds": 85.106534}, "exception": {"type": "InvalidStateError", "value": "invalid state", "traceback": true}, "extra": {}, "file": {"name": "events.py", "path": "/opt/hostedtoolcache/Python/3.10.13/x64/lib/python3.10/asyncio/events.py"}, "function": "_run", "level": {"icon": "‚ùå", "name": "ERROR", "no": 40}, "line": 80, "message": "An error has been caught in function '_run', process 'MainProcess' (3645), thread 'MainThread' (140312588893248):", "module": "events", "name": "asyncio.events", "process": {"id": 3645, "name": "MainProcess"}, "thread": {"id": 140312588893248, "name": "MainThread"}, "time": {"repr": "2023-09-15 07:22:27.638079+08:00", "timestamp": 1694733747.638079}}}
